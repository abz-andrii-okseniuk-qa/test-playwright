var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};class ShieldOnBoarding extends React.Component{constructor(t){super(t),this.state={shouldShowAnimation:!0,step:t.step,isHidden:!0},this.isFlipped=t.isFlipped,GA("Onboarding",this.props.step+" Step Show",window.location.hostname),this.clickOnTooltipBtn=this.clickOnTooltipBtn.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.destroyAnimation=this.destroyAnimation.bind(this),this.toNextStep=this.toNextStep.bind(this),window.addEventListener("click",()=>{const e=this.state.step;e===SERP_ONBOARDING_STEPS_COUNT-1&&this.toNextStep(SERP_ONBOARDING_STEPS_COUNT),0!==e&&t.closePopup()})}componentDidMount(){this.state.step<SERP_ONBOARDING_STEPS_COUNT&&setTimeout(()=>this.setState({isHidden:!1}),150)}onCloseClick(){const t=this.props.closePopup,e=this.state.step;if(GA("Onboarding","Skip","Step "+e),e>0)return this.toNextStep(SERP_ONBOARDING_STEPS_COUNT);t(),this.toNextStep()}getFirstStep(){return`<div class=shield-tooltip_1__container>\n                    <span>${translate("onBoardingHoverTheShield")}</span>\n                    <span class=shield-tooltip_1__container-text>${translate("onBoardingCheckWebsiteRep")}</span>\n                <div>`}getSecondStep(t){return`<div class=shield-tooltip_2__container>\n                    <div class=shield-tooltip_2__container-content>\n                        <div class=shield-tooltip_2__container-content_text>\n                            <div>${translate("onBoardingThisWebsiteIs").replace("%SAFETY%",this.getSafety(t))}</div>\n                            <div>${translate("onBoarding4States")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_green"></div>\n                            <div class=trusted>${translate("trustedSite")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_orange"></div>\n                            <div class=suspicious>${translate("suspiciousSite")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_red"></div>\n                            <div class=untrusted>${translate("untrustedSite")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_gray"></div>\n                            <div class=unknown>${translate("unknownSite")}</div>\n                        </div>\n                    </div>\n                </div>`}getThirdStep(){return`<div class=class=shield-tooltip_3__container>\n                    <div class=shield-tooltip_3__container-content>\n                        <span>${translate("onBoardingThisPopupShows")}</span>\n                        <span class=shield-tooltip_3__container-content_bold>${translate("onBoardingYouCanClick")}</span>\n                    </div>\n                </div>`}getFourthStep(){return`<div class=class=shield-tooltip_5__container>\n                    <div class=shield-tooltip_5__container-content>${translate("onBoardingSafelyBrowse")}</div>\n                </div>`}getSafety(t){switch(t){case SAFE:return translate("trusted").toLowerCase();case SUSPICIOUS:return translate("suspicious").toLowerCase();case NOT_SAFE:return translate("untrusted").toLowerCase();case UNKNOWN:return translate("unknown").toLowerCase()}}getHeaderText(t){switch(t){case 0:return"ðŸŽ‰ "+translate("welcomeToWot");case 1:return translate("onBoardingReputationScore");case 2:return translate("onBoardingReputationDashboard");case 3:return"âœ… "+translate("onBoardingYoureAllSet")}}clickOnLearnMore(){GA("Onboarding","Learn More"),webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:LEARN_MORE_URL})}toNextStep(t){t=t||this.state.step+1,this.props.dispatch(toNextStepOnboarding(t)),this.setState(e=>_extends({},e,{step:t}))}clickOnTooltipBtn(t){GA("Onboarding",this.props.step+" Step Click",window.location.hostname),t.stopPropagation(),this.toNextStep()}destroyAnimation(){this.setState({shouldShowAnimation:!1})}render(){var t=this.props;const e=t.childSafety,i=t.safety;var s=this.state;const n=s.shouldShowAnimation,o=s.isHidden,a=s.step;if(a>=SERP_ONBOARDING_STEPS_COUNT)return React.createElement("i",null);const l=`shield-tooltip shield-tooltip_${a+1}${this.isFlipped?" flipped":""}`;let r="";const d=e===NOT_SAFE;let c=0,p=d?354:325;switch(a){case 0:r={__html:this.getFirstStep()},c=-131,p=-135;break;case 1:r={__html:this.getSecondStep(i)},c=d?-36:-28;break;case 2:r={__html:this.getThirdStep()},c=-41;break;case 3:r={__html:this.getFourthStep()},c=d?47:7,p=d?-200:-230}return React.createElement("div",{className:l,style:{top:c+"px",left:p+"px",opacity:Number(!o)},ref:t=>{this.ref=t}},React.createElement("div",{className:"shield-tooltip__container-header"},React.createElement("div",{className:"shield-tooltip__container-header_text"},this.getHeaderText(a)),React.createElement("div",{className:"shield-tooltip__container-header_right"},a<SERP_ONBOARDING_STEPS_COUNT-1&&React.createElement("div",{className:"shield-tooltip__container-header_step"},a+1+"/3"),React.createElement("div",{onClick:this.onCloseClick,className:"shield-tooltip-close"}))),React.createElement("div",{style:{width:"100%"},dangerouslySetInnerHTML:r}),a===SERP_ONBOARDING_STEPS_COUNT-1&&n&&React.createElement(LottieAnimation,{onAnimationComplete:this.destroyAnimation,className:"shield-tooltip_5-confetti",animationName:"onboarding-confetti.json",loop:!1}),a>0&&React.createElement("div",{className:"shield-tooltip__footer"},a===SERP_ONBOARDING_STEPS_COUNT-1&&React.createElement("span",{className:"shield-tooltip__footer-link",onClick:this.clickOnLearnMore},translate("whatsNewWOTLearnMore")),React.createElement("span",{className:"shield-tooltip__btn shield-tooltip__footer-link",onClick:this.clickOnTooltipBtn},translate(a!==SERP_ONBOARDING_STEPS_COUNT-1?"next":"gotit"))))}}