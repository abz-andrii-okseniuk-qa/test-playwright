self.yodules=self.yodules||{},void(yodules.CntHelpers={init:function(){const e=yodules.CntHelpers;e.class=class{helperDomReady(e){return e=e||document,new Promise(t=>{e.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t),"complete"===e.readyState&&t()})}getDomainName(e){return this.convertToLink(e).hostname}convertToLink(e){let t=document.createElement("a");return t.href=e,t}isTopPage(){return top===self&&!!window.location}isRequiredHost(e){return location.hostname.includes(e)}findParent(e,t){do{if(e===document||e===document.body)return null;if(t.call(this,e))return e}while(e=e.parentElement);return null}documentListener(){document&&document.addEventListener.apply(document,arguments)}toArray(e){return Array.prototype.slice.call(e)}chromeSendMessage(e){chrome&&chrome.runtime&&chrome.runtime.sendMessage(e)}},e.instance=new e.class}});const dirtyHackForFirefox={ReactDOM:ReactDOM,React:React,ReactRedux:ReactRedux};if(window.top===window){webextApi.runtime.onMessage.addListener((e,t,n)=>{e.action===PING&&n(PONG)}),imAlive(),injectFontsContent();const e=new Store({portName:"4873"});e.ready().then(()=>{const t={serp:new SerpHandler(e),warning:new WarningHandler(e),sharing:new SharingHandler,redirect:new RedirectHandler,socialLogin:new SocialAuthHandler(e),preCheckAssistant:new PreCheckAssistantHandler(e),slider:new SliderManager(e),addReviewHandler:new AddReviewHandler(e),leakHook:new LeakHookHandler(e),pinWotPopupHandler:new PinPopupHandler(e)};t.slider.init(),t.redirect.init(),t.pinWotPopupHandler.init(),function n(){if(Object.keys(dirtyHackForFirefox).forEach(e=>{void 0===window[e]&&(window[e]=dirtyHackForFirefox[e])}),window[WOT_TRACE_ID.name]=e.getState().wotTraceId,document.getElementsByTagName("body").length<1)setTimeout(n.bind(this),500);else{t.warning.render(),t.sharing.init(),t.serp.init(),t.socialLogin.init(),t.leakHook.render();const n=e.getState();if(webextApi.runtime.onMessage.addListener((e,a,o)=>{e.action===PRE_CHECK&&o(t.preCheckAssistant.init(n.ratings,e.url))}),window.addEventListener("message",e=>{if(!e.data)return;switch(e.data.type||e.data){case WOT_TOGGLE_POPUP:toggleWOTSlider();break;default:return}}),WOT_WEBSITE_DOMAINS_WITH_AUTH.find(e=>window.location.hostname.startsWith(e))){const n=()=>{const t=e.getState().settings;window.postMessage({"wot-ext-data-received":{version:VERSION,protection:t.protection}},window.location.origin)},a={"wot-user-update":{func:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=e.getState().user.token;t&&t!==n?e.dispatch(saveToken(t)):n&&!t&&e.dispatch(logout())},arg:"token"},"wot-user-update-purchase":{func:()=>{e.dispatch(getUserPlan())}},"wot-ext-data":{func:n},"wot-ext-opt-in":{func:()=>{e.dispatch(turnOnProtection()),e.dispatch(turnOffParentalControl()),e.dispatch(setWarningsLevel(WARNINGS_LEVEL_HIGH))}},"wot-open-tab":{func:openInternalPage,arg:"page"},"wot-open-settings-section":{func:openSettingsSection,arg:"sectionName"},"wot-show-pin-popup":{func:()=>{t.pinWotPopupHandler.render()}},[DASHBOARD_REQUEST_EXTENSION_DATA_MESSAGE]:{func:async()=>{getDashboardData(e.getState()).then(e=>{window.postMessage({[DASHBOARD_RECEIVE_EXTENSION_DATA_MESSAGE]:{data:e}},window.location.origin)})}},[DASHBOARD_UPDATE_SCAN_TIME_MESSAGE]:{func:t=>{e.dispatch(updatePopupScanTime(t)),webextApi.runtime.sendMessage({name:RESTART_SCANTIME_ALARM})},arg:"scanTime"}};window.addEventListener("message",e=>{if(!e.data)return;const t=e.data.type||e.data,n=a[t];if(!n)return;const o=void 0===e.data.token;"wot-user-update"===t&&o||n.func(n.arg&&e.data[n.arg])}),n()}}}()})}