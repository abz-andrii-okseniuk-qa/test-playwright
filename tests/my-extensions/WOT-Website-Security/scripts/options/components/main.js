const SettingsGACategory="New-Settings",rtpSectionIdx=6;class MainComponent extends React.Component{constructor(t){super(t),this.serpsToOmitFromSettings=["Gmail"],this.filterSerpsFromList=this.filterSerpsFromList.bind(this),document.title="WOT - "+translate("settings"),this.state={openShields:!!this.props.getParams.serpid,selectedIdx:1},this.numberOfSections=7,this.pinWotPopupHandler=new PinPopupHandler(this.props.store),!this.props.pinWotPopup.popupWasShown&&this.pinWotPopupHandler.render()}async componentDidMount(){try{const t=this.props.user;this.setState({isPremiumUser:t.isPremiumUser})}catch(t){this.setState({isPremiumUser:!1})}window.addEventListener("scroll",this.scrollHandler.bind(this),{passive:!0}),this.checkForAnchorsInLink()}componentWillUnmount(){window.removeEventListener("scroll",this.scrollHandler.bind(this))}handleSidebarButtonClick(t){this.isScrolling=!0,clearTimeout(this.scrollTimeout),this.props.settings.protection||6!==t?this.refs["section_"+t].scrollIntoView({behavior:"smooth"}):window.scrollTo(0,0),this.setState({selectedIdx:t}),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1},700)}onLogoClick(){this.sendGA("WOT Logo"),webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:MAIN_PAGE_URL})}checkForAnchorsInLink(){let t=window.location.hash;if(t){t=t.replace("#","");const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}}scrollHandler(){if(this.isScrolling)return;const t=document.querySelectorAll("[id^='feature_section']");let e=1;t.forEach(t=>{const i=t.offsetTop,n=t.clientHeight;if(window.pageYOffset>=(i-n/4)/1.5){const i=t.getAttribute("id");e=parseInt(i.split(" ").at(-1),10)}}),this.setState({selectedIdx:e})}sendGA(t){GA("New-Settings",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}openShields(){this.setState({openShields:!this.state.openShields})}filterSerpsFromList(t){return!this.serpsToOmitFromSettings.includes(t.name)}_turnOffProtectionPreAction(){window.scrollTo(0,0)}_showLeakMonitoringModal(){this.refs.section_3.scrollIntoView({behavior:"smooth"}),this.setState({showModal:!0})}_leakMonitoringModalConfirm(){this.props.store.dispatch(turnOnLeakMonitoring()),this.setState({showModal:!1})}_leakMonitoringModalCancel(){this.setState({showModal:!1})}turnOffSafeBrowsing(){turnOffAllSafeBrowsingControls(),setWarningsLevel(WARNINGS_LEVEL_OFF)}turnOnSafeBrowsing(){turnOnAllSafeBrowsingControls(),setWarningsLevel(WARNINGS_LEVEL_HIGH)}_dismissLeakAlert(t){this.props.dispatch(dismissLeakAlert(t))}render(){var t=this.props;const e=t.dispatch,i=t.settings,n=t.whitelist,o=t.phishingWhitelist,s=t.serps,a=t.trackerBlockerData;var r=this.props.store.getState();const l=r.user,c=r.leakMonitoring,d=l.isPremiumUser,h=[],m="safari"===browserName,p=this.state.selectedIdx;this.state.showModal;window.eventSended||(this.sendGA("Open"),window.eventSended=!0);i.shields.all,setShieldsLevel,translate("always"),SHIELDS_LEVEL_HIGH,setShieldsLevel,translate("poorOnly"),SHIELDS_LEVEL_NORMAL,setShieldsLevel,translate("off"),SHIELDS_LEVEL_OFF;s.filter(this.filterSerpsFromList).forEach(t=>{let e=i.shields.all;_.forEach(i.shields,(i,n)=>{new RegExp(t.domain).test(n)&&(e=i)}),h.push({id:t.id,host:t.name,level:e,shieldActions:[{action:setShieldsLevel,title:translate("always"),arguments:SHIELDS_LEVEL_HIGH,params:["New-Settings","Donuts-list","All"]},{action:setShieldsLevel,title:translate("off"),arguments:SHIELDS_LEVEL_OFF,params:["New-Settings","Donuts-list","Off"]}]})});const u={id:1,dataAutomationToggle:"reputation-icons-section-toggle",title:translate("safeSearch"),subTitle:translate("safeSearchSubtitle"),isPremiumFeature:!1,dispatch:e,protection:!0,actions:[()=>setShieldsLevel(SHIELDS_LEVEL_OFF),()=>setShieldsLevel(SHIELDS_LEVEL_HIGH)],check:i.shields.all===SHIELDS_LEVEL_HIGH,actionGA:"donuts",serpList:h,settings:i},g={id:2,dataAutomationClick:"adult-protection-click",dataAutomationToggle:"adult-protection-toggle",dataAutomationUpgrade:"adult-protection-upgrade",title:translate("Safe Browsing"),subTitle:translate("WOT keeps you vigilant online by scanning every site, page and service that you visit with real time alerts."),isPremiumFeature:!0,isPremiumUser:d,dispatch:e,protection:i.protection,actions:[turnOffAllSafeBrowsingControls,turnOnAllSafeBrowsingControls],check:(!!i.parental||!!i.gambling||!!i.parentalExtraIcon||i.warnings===WARNINGS_LEVEL_HIGH)&&d,actionGA:"Safe Browsing",subFeatures:[{title:translate("warningAlerts"),subTitle:translate("warningAlertsSubtitle"),actions:[()=>setWarningsLevel(WARNINGS_LEVEL_OFF),()=>setWarningsLevel(WARNINGS_LEVEL_HIGH)],check:i.warnings===WARNINGS_LEVEL_HIGH&&d,actionGA:"warnings"},{title:translate("adultContent"),subTitle:translate("parentalControlON"),actions:[turnOffParentalControl,turnOnParentalControl],check:!!i.parental&&d,actionGA:"adult content"},{title:translate("gamblingSites"),subTitle:translate("gamblingSitesText"),actions:[turnOffGamblingControl,turnOnGamblingControl],check:!!i.gambling&&d,actionGA:"Gambling Sites"},{title:translate("18Icon"),subTitle:translate("18IconON"),actions:[turnOffParentalControlExtraIcon,turnOnParentalControlExtraIcon],check:!!i.parentalExtraIcon&&d,actionGA:"18+ icon"}]},S={id:3,dataAutomationClick:"leak-monitoring-click",dataAutomationToggle:"leak-monitoring-toggle",dataAutomationUpgrade:"leak-monitoring-upgrade",title:translate("identityProtection"),subTitle:translate("identityProtectionSubtitle"),isPremiumFeature:!0,isPremiumUser:d,dispatch:e,protection:i.protection,actions:[turnOffLeakMonitoring,void 0],preActions:[void 0,this._showLeakMonitoringModal.bind(this)],check:!!i.leakMonitoring&&d,actionGA:"Leak Monitoring",modal:{showModal:this.state.showModal,handleConfirm:this._leakMonitoringModalConfirm.bind(this),handleCancel:this._leakMonitoringModalCancel.bind(this),modalText:translate("identityProtectionModalMessage")},showExtraContent:!!i.leakMonitoring&&d,extraContent:React.createElement(IdentityProtectionSection,{breaches:c.breaches,email:c.email,dismissLeakAlert:this._dismissLeakAlert.bind(this)})},A={id:4,dataAutomationWlInput:"email-protection-wl-input",dataAutomationWlAddBtn:"email-protection-wl-add",dataAutomationWlRemoveBtn:"email-protection-wl-remove",dataAutomationWlItem:"email-protection-wl-item",dataAutomationClick:"email-protection-click",dataAutomationToggle:"email-protection-toggle",dataAutomationUpgrade:"email-protection-upgrade",title:translate("gmailProtectionTitle"),subTitle:translate("gmailProtectionDescription"),isPremiumFeature:!0,isPremiumUser:d,dispatch:e,protection:i.protection,actions:[turnOffPhishing,turnOnPhishing],check:!!i.phishing&&d,actionGA:"Gmail-Protection",subFeatures:[{title:translate("gmailProtectionSubTitle"),subTitle:translate("smartEmailProtectionSubtitle"),actions:[turnOffPhishing,turnOnPhishing],check:!!i.phishing&&d,actionGA:"Gmail-Protection"}],settings:i,whitelist:o,isPhishingWL:!0},L=[{id:2,section:u},{id:3,section:g},{id:4,section:S},{id:5,section:{id:5,dataAutomationClick:"anti-tracker-click",dataAutomationToggle:"anti-tracker-toggle",dataAutomationUpgrade:"anti-tracker-upgrade",title:translate("digitalTrackingProtection"),subTitle:translate("digitalTrackingProtectionSubtitle"),isPremiumFeature:!0,isPremiumUser:d,dispatch:e,protection:i.protection,actions:[()=>toggleBlockAllTrackers(!1),()=>toggleBlockAllTrackers(!0)],check:!!a.allBlocked&&d,actionGA:"trackerBlocker"},notForSafari:!0},{id:6,section:A},{id:7,section:{id:6,dataAutomationWlInput:"rt-protection-wl-input",dataAutomationWlAddBtn:"rt-protection-wl-add",dataAutomationWlRemoveBtn:"rt-protection-wl-remove",dataAutomationWlItem:"rt-protection-wl-item",dataAutomationToggle:"rt-protection-toggle",title:translate(i.protection?"rtProtection":"rtProtectionRecommended"),subTitle:translate(i.protection?"rtON":"rtOFF"),dispatch:e,protection:i.protection,actions:[turnOffProtection,turnOnProtection],preActions:[this._turnOffProtectionPreAction.bind(this),void 0],check:!!i.protection,actionGA:"RTP",whitelist:n,settings:i,policy:i.protection,isRTProtectionSection:!i.protection},isLastSection:!0}];return React.createElement("div",{className:"settings"},React.createElement("div",{className:"settings__body"},React.createElement(Sidebar,{selectedIdx:p,onClick:this.handleSidebarButtonClick.bind(this),user:this.props.user}),React.createElement("div",{className:"settings__container",ref:"section_1"},L.map(t=>!(t.notForSafari&&m)&&[React.createElement(FeatureSection,t.section),!t.isLastSection&&React.createElement("hr",{className:"sections__divider",ref:"section_"+t.id,id:"section_"+t.id})])),React.createElement("div",{className:"options__ads"},React.createElement(ConversionBanner,{isPremiumUser:d}),React.createElement(ContactUs,null))))}}function mapStateToPros(t){const e={};return window.location.search.substr(1).split("&").forEach(t=>{e[t.split("=")[0]]=t.split("=")[1]}),_.merge({},t,{getParams:e})}MainComponent.propTypes={},MainComponent=ReactRedux.connect(mapStateToPros)(MainComponent);